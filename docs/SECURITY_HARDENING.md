# Security Hardening Guide | ุฏููู ุชูููุฉ ุงูุฃูุงู

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุณุชูุฏ ููุซู ุงูุชุญุณููุงุช ุงูุฃูููุฉ ุงููุทุจูุฉ ุนูู ูุธุงู ERP ุงูุตูุฏูู ูุงูุฎุทูุงุช ุงููุฏููุฉ ุงููุทููุจุฉ ูุฅููุงู ุงูุชูููุฉ ุงูุฃูููุฉ.

---

## โ ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. ุชุญููู ุงูุนุฑูุถ (Views) ุฅูู SECURITY INVOKER

ุฌููุน ุงูุนุฑูุถ ุงูุชุงููุฉ ุชู ุชุญููููุง ูุชุณุชุฎุฏู `SECURITY INVOKER` ููุง ูุนูู ุฃููุง ุชุญุชุฑู ุณูุงุณุงุช RLS ุงูุฎุงุตุฉ ุจุงููุณุชุฎุฏู ุงููุชุตู:

| ุงูุนุฑุถ | ุงููุตูู ุงููุณููุญ |
|-------|---------------|
| `safe_employee_details` | ุฌููุน ุงููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู (ุงูุฑุงุชุจ ูููุฏูุฑ ููุท) |
| `safe_customers_summary` | admin, pharmacist, cashier |
| `safe_suppliers_summary` | admin, pharmacist, inventory_manager |
| `sales_by_currency` | admin, pharmacist |
| `sales_summary_view` | admin, pharmacist |
| `inventory_summary_view` | admin, pharmacist, inventory_manager |
| `stock_alerts` | admin, pharmacist, inventory_manager |
| `returns_statistics` | admin ููุท |
| `returns_inventory_impact` | admin, inventory_manager |
| `posted_documents_audit` | admin ููุท |
| `returns_processing_monitor` | admin ููุท |
| `vw_latest_exchange_rates` | ุฌููุน ุงููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู |
| `vw_document_gl_links` | admin, pharmacist |

### 2. ูุธุงู ุณุฌู ุงูุชุฏููู (Audit Logging)

ุชู ุฅูุดุงุก ุฌุฏูู `security_audit_log` ูุชุชุจุน ุฌููุน ุงูุชุบููุฑุงุช ุนูู ุงูุฌุฏุงูู ุงูุญุณุงุณุฉ:

**ุงูุฌุฏุงูู ุงููุฑุงูุจุฉ:**
- `suppliers` - ุงูููุฑุฏูู
- `employees` - ุงูููุธููู
- `customers` - ุงูุนููุงุก
- `purchase_invoices` - ููุงุชูุฑ ุงูุดุฑุงุก
- `purchase_orders` - ุฃูุงูุฑ ุงูุดุฑุงุก
- `goods_receipts` - ุงุณุชูุงู ุงูุจุถุงุฆุน
- `sales_invoices` - ููุงุชูุฑ ุงููุจูุนุงุช
- `inventory_cost_layers` - ุทุจูุงุช ุชูููุฉ ุงููุฎุฒูู
- `cash_boxes` - ุงูุตูุงุฏูู ุงูููุฏูุฉ
- `gl_accounts` - ุงูุญุณุงุจุงุช ุงููุญุงุณุจูุฉ

**ุงูุจูุงูุงุช ุงููุณุฌูุฉ:**
- `table_name` - ุงุณู ุงูุฌุฏูู
- `record_id` - ูุนุฑู ุงูุณุฌู
- `action` - ููุน ุงูุนูููุฉ (INSERT, UPDATE, DELETE)
- `old_data` - ุงูุจูุงูุงุช ุงููุฏููุฉ (JSONB)
- `new_data` - ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ (JSONB)
- `changed_by` - ุงููุณุชุฎุฏู ุงููููุฐ
- `changed_at` - ููุช ุงูุชุบููุฑ

### 3. ุฅุตูุงุญ ููุฏ ุงูููุชุงุญ ุงูุฃุฌูุจู

ุชู ุฅุฒุงูุฉ ููุฏ `stock_ledger_batch_id_fkey` ุงูุฐู ูุงู ูุณุจุจ ุฃุฎุทุงุก ูู ุชุฑุญูู ุงุณุชูุงู ุงูุจุถุงุฆุน.

---

## โ๏ธ ุงูุฎุทูุงุช ุงููุฏููุฉ ุงููุทููุจุฉ

### 1. ุชูุนูู ุญูุงูุฉ ูููุงุช ุงููุฑูุฑ ุงููุณุฑุจุฉ (Leaked Password Protection)

**ุงููุดููุฉ:**
ููุฒุฉ ุญูุงูุฉ ูููุงุช ุงููุฑูุฑ ุงููุณุฑุจุฉ ูุนุทูุฉ ุญุงููุงู. ูุฐุง ูุณูุญ ูููุณุชุฎุฏููู ุจุงุณุชุฎุฏุงู ูููุงุช ูุฑูุฑ ูุนุฑููุฉ ูุณุฑุจุฉ ูู ููุงุนุฏ ุจูุงูุงุช ุงูุงุฎุชุฑุงู.

**ุงูุญู:**
ูุฐุง ุงูุฅุนุฏุงุฏ **ูุง ูููู ุชุบููุฑู ุนุจุฑ ุงูููุฏ** ููุชุทูุจ ุฅุฌุฑุงุก ูุฏูู:

1. ุงูุชูู ุฅูู ููุญุฉ ุชุญูู Lovable Cloud
2. ุงุฐูุจ ุฅูู ูุณู **Users** โ **Auth Settings**
3. ุงุจุญุซ ุนู ุฎูุงุฑ **"Leaked Password Protection"**
4. ูุนูู ูุฐุง ุงูุฎูุงุฑ

**ุงููุงุฆุฏุฉ:**
ุนูุฏ ุงูุชูุนููุ ุงููุธุงู ุณูููุน ุงููุณุชุฎุฏููู ูู ุงุณุชุฎุฏุงู ูููุงุช ูุฑูุฑ ููุฌูุฏุฉ ูู ููุงุนุฏ ุงูุจูุงูุงุช ุงููุณุฑุจุฉ ุงููุนุฑููุฉ (ูุซู Have I Been Pwned).

**ุงูุชูุตูุฉ:**
โ๏ธ **ููุตู ุจุดุฏุฉ ุจุชูุนูู ูุฐุง ุงูุฅุนุฏุงุฏ ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ.**

---

## ๐ ููุฎุต ูุจู/ุจุนุฏ

| ุงูุฌุงูุจ | ูุจู | ุจุนุฏ |
|--------|-----|-----|
| ุงูุนุฑูุถ ุงูููุดููุฉ | 14 ุนุฑุถุงู ูุชุงุญุงู ููุนููู | ุฌููุน ุงูุนุฑูุถ ูุญููุฉ ุจู SECURITY INVOKER |
| ุณุฌู ุงูุชุฏููู | ุบูุฑ ููุฌูุฏ | 10 ุฌุฏุงูู ูุฑุงูุจุฉ |
| ููุฏ batch_id | ูุณุจุจ ุฃุฎุทุงุก | ุชู ุฅุฒุงูุชู |
| ุญูุงูุฉ ูููุงุช ุงููุฑูุฑ | ูุนุทูุฉ | ุชุชุทูุจ ุชูุนูู ูุฏูู |

---

## ๐ ุฃูุถู ุงูููุงุฑุณุงุช ุงูุฅุถุงููุฉ

1. **ูุฑุงุฌุนุฉ ุฏูุฑูุฉ ููุตูุงุญูุงุช:**
   - ุฑุงุฌุน ุณูุงุณุงุช RLS ุดูุฑูุงู
   - ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏููู ูุฏููู ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุตูุงุญูุงุช ุงููุทููุจุฉ

2. **ูุฑุงูุจุฉ ุณุฌู ุงูุชุฏููู:**
   - ุฑุงุฌุน ุณุฌู ุงูุชุฏููู ุฃุณุจูุนูุงู
   - ุงุจุญุซ ุนู ุฃู ูุดุงุท ูุดุจูู

3. **ุชุญุฏูุซ ูููุงุช ุงููุฑูุฑ:**
   - ูุฑุถ ุชุบููุฑ ูููุงุช ุงููุฑูุฑ ูู 90 ูููุงู
   - ุงุณุชุฎุฏู ูุชุทูุจุงุช ููุฉ ูููุฉ ูุฑูุฑ ุตุงุฑูุฉ

4. **ุงููุณุฎ ุงูุงุญุชูุงุทู:**
   - ุชุฃูุฏ ูู ูุฌูุฏ ูุณุฎ ุงุญุชูุงุทูุฉ ููููุฉ
   - ุงุฎุชุจุฑ ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุฏูุฑู

---

## ๐ ุงูุฏุนู

ูู ุญุงู ูุฌูุฏ ุฃู ูุดุงูู ุฃูููุฉุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุชุทููุฑ ุงููุธุงู ููุฑุงู.

---

*ุขุฎุฑ ุชุญุฏูุซ: ุฏูุณูุจุฑ 2024*
